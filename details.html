<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT 交易平台 - 詳情</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <div class="logo-icon"><i class="fa-solid fa-wallet"></i></div>
                NFT Exchange
            </a>
            <nav class="main-nav">
                <a href="index.html" class="nav-link">首頁</a>
                <a href="#" class="nav-link">熱門交易</a>
                <a href="#" class="nav-link">我的卡片</a>
                <a href="#" class="nav-link">交易歷史</a>
                <a href="#" class="nav-link">個人中心</a>
            </nav>
            <button id="connectWalletBtn" class="btn btn-primary">
                <i class="fa-solid fa-wallet" style="margin-right: 8px;"></i>連接錢包
            </button>
            <div id="connectedWallet" style="display: none; color: var(--primary); font-weight: 500; font-size: 14px;">
                <i class="fa-solid fa-circle-check" style="margin-right: 5px; color: var(--success);"></i>
                <span id="walletAddress">0x1234...5678</span>
            </div>
        </div>
    </header>

    <div class="main-content">
        <div class="container">
            <div style="background-color: var(--white); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 30px; margin-bottom: 30px;">
                <h1 style="font-size: 24px; color: var(--dark); margin-bottom: 20px;">NFT 詳情</h1>
                
                <div style="display: flex; gap: 30px; margin-bottom: 30px;">
                    <!-- NFT 卡片信息 -->
                    <div style="flex: 0 0 350px;">
                        <div class="nft-card" style="background-color: var(--white); border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow);">
                            <div class="card-image" style="position: relative; height: 350px;">
                                <img id="nftImage" src="/api/placeholder/350/350" alt="NFT Card Image" style="width: 100%; height: 100%; object-fit: cover;">
                                <div id="nftBadge" class="card-badge" style="position: absolute; top: 15px; right: 15px; background: var(--primary-gradient); color: white; font-size: 12px; padding: 5px 10px; border-radius: 20px; font-weight: 500;">
                                    熱門
                                </div>
                            </div>
                            <div class="card-content" style="padding: 20px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 id="nftTitle" style="margin: 0; font-size: 20px; color: var(--dark);">極光幻想 #001</h3>
                                    <div class="card-likes" style="display: flex; align-items: center; gap: 5px; color: var(--gray); font-size: 14px;">
                                        <i class="fa-regular fa-heart"></i>
                                        <span>42</span>
                                    </div>
                                </div>
                                <div style="margin-bottom: 15px;">
                                    <div style="font-size: 12px; color: var(--gray); margin-bottom: 3px;">目前售價</div>
                                    <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 600; font-size: 20px;">
                                        <i class="fa-brands fa-ethereum"></i>
                                        <span id="nftPrice">0.45 ETH</span>
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 30px; height: 30px; border-radius: 50%; overflow: hidden; background: var(--light-gray);">
                                            <img src="/api/placeholder/30/30" alt="Owner avatar">
                                        </div>
                                        <div style="font-size: 14px; color: var(--dark-gray);">
                                            持有者：<span id="nftOwner" style="color: var(--primary);">CryptoKing</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <button id="transactionBtn" class="btn btn-primary btn-full">
                                    <i class="fa-solid fa-arrow-right-arrow-left" style="margin-right: 5px;"></i> 交易此 NFT
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- NFT 詳細資訊 -->
                    <div style="flex: 1;">
                        <div style="margin-bottom: 25px;">
                            <h2 style="font-size: 20px; color: var(--dark); margin-bottom: 15px;">NFT 描述</h2>
                            <p id="nftDescription" style="color: var(--dark-gray); line-height: 1.6; margin-bottom: 0;">
                                這是一張極為罕見的極光幻想系列 NFT 卡片，由知名數字藝術家 AuroraCreator 創作。卡片描繪了北極極光與星空的奇幻交融，作品運用了動態光感技術，在不同角度觀看時會呈現出變化的極光效果。這張卡片是極光系列中的第一張，具有極高的收藏價值和增值潛力。
                            </p>
                        </div>
                        
                        <div style="margin-bottom: 25px;">
                            <h2 style="font-size: 20px; color: var(--dark); margin-bottom: 15px;">屬性</h2>
                            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 0;">
                                <div style="background-color: var(--lighter-gray); border-radius: var(--border-radius); padding: 8px 12px;">
                                    <div style="color: var(--gray); font-size: 12px;">稀有度</div>
                                    <div style="color: var(--primary); font-weight: 500;">傳奇</div>
                                </div>
                                <div style="background-color: var(--lighter-gray); border-radius: var(--border-radius); padding: 8px 12px;">
                                    <div style="color: var(--gray); font-size: 12px;">系列</div>
                                    <div style="color: var(--primary); font-weight: 500;">極光幻想</div>
                                </div>
                                <div style="background-color: var(--lighter-gray); border-radius: var(--border-radius); padding: 8px 12px;">
                                    <div style="color: var(--gray); font-size: 12px;">創作年份</div>
                                    <div style="color: var(--primary); font-weight: 500;">2024</div>
                                </div>
                                <div style="background-color: var(--lighter-gray); border-radius: var(--border-radius); padding: 8px 12px;">
                                    <div style="color: var(--gray); font-size: 12px;">藝術家</div>
                                    <div style="color: var(--primary); font-weight: 500;">AuroraCreator</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 25px;">
                            <h2 style="font-size: 20px; color: var(--dark); margin-bottom: 15px;">持有者歷史</h2>
                            <div style="background-color: var(--lighter-gray); border-radius: var(--border-radius); padding: 15px; margin-bottom: 0;">
                                <div class="owner-list" style="max-height: 200px; overflow-y: auto;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 30px; height: 30px; border-radius: 50%; overflow: hidden; background: var(--light-gray);">
                                                <img src="/api/placeholder/30/30" alt="Owner avatar">
                                            </div>
                                            <div>
                                                <div style="font-weight: 500; color: var(--dark);">CryptoKing</div>
                                                <div style="font-size: 12px; color: var(--gray);">0x8F3...B92C</div>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.45 ETH</span>
                                            </div>
                                            <div style="font-size: 12px; color: var(--gray);">當前持有者</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 30px; height: 30px; border-radius: 50%; overflow: hidden; background: var(--light-gray);">
                                                <img src="/api/placeholder/30/30" alt="Owner avatar">
                                            </div>
                                            <div>
                                                <div style="font-weight: 500; color: var(--dark);">NFTLover</div>
                                                <div style="font-size: 12px; color: var(--gray);">0x2A7...F01D</div>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.42 ETH</span>
                                            </div>
                                            <div style="font-size: 12px; color: var(--gray);">2 天前</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 30px; height: 30px; border-radius: 50%; overflow: hidden; background: var(--light-gray);">
                                                <img src="/api/placeholder/30/30" alt="Owner avatar">
                                            </div>
                                            <div>
                                                <div style="font-weight: 500; color: var(--dark);">CryptoCollector</div>
                                                <div style="font-size: 12px; color: var(--gray);">0x9C5...E43A</div>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.38 ETH</span>
                                            </div>
                                            <div style="font-size: 12px; color: var(--gray);">1 週前</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 30px; height: 30px; border-radius: 50%; overflow: hidden; background: var(--light-gray);">
                                                <img src="/api/placeholder/30/30" alt="Owner avatar">
                                            </div>
                                            <div>
                                                <div style="font-weight: 500; color: var(--dark);">AuroraCreator</div>
                                                <div style="font-size: 12px; color: var(--gray);">0x3F5...EF21</div>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.25 ETH</span>
                                            </div>
                                            <div style="font-size: 12px; color: var(--gray);">2 週前</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div style="width: 30px; height: 30px; border-radius: 50%; overflow: hidden; background: var(--light-gray);">
                                                <img src="/api/placeholder/30/30" alt="Creator avatar">
                                            </div>
                                            <div>
                                                <div style="font-weight: 500; color: var(--dark);">AuroraCreator</div>
                                                <div style="font-size: 12px; color: var(--gray);">0x3F5...EF21</div>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-solid fa-gavel"></i>
                                                <span>鑄造</span>
                                            </div>
                                            <div style="font-size: 12px; color: var(--gray);">1 個月前</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h2 style="font-size: 20px; color: var(--dark); margin-bottom: 15px;">交易歷史</h2>
                            <div style="background-color: var(--lighter-gray); border-radius: var(--border-radius); padding: 15px; margin-bottom: 0;">
                                <div class="transaction-list" style="max-height: 250px; overflow-y: auto;">
                                    <div style="padding-bottom: 15px; margin-bottom: 15px; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <div style="color: var(--dark); font-weight: 500;">購買</div>
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.45 ETH</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px;">
                                            <div style="color: var(--gray);">
                                                <span>從 </span>
                                                <span style="color: var(--primary);">NFTLover</span>
                                                <span> 到 </span>
                                                <span style="color: var(--primary);">CryptoKing</span>
                                            </div>
                                            <div style="color: var(--gray);">5 分鐘前</div>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px; font-size: 12px; color: var(--gray);">
                                            <i class="fa-solid fa-link"></i>
                                            <span style="font-family: monospace;">TX-0x7d8b9a8f21e43bcd...</span>
                                        </div>
                                    </div>
                                    
                                    <div style="padding-bottom: 15px; margin-bottom: 15px; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <div style="color: var(--dark); font-weight: 500;">購買</div>
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.42 ETH</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px;">
                                            <div style="color: var(--gray);">
                                                <span>從 </span>
                                                <span style="color: var(--primary);">CryptoCollector</span>
                                                <span> 到 </span>
                                                <span style="color: var(--primary);">NFTLover</span>
                                            </div>
                                            <div style="color: var(--gray);">2 天前</div>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px; font-size: 12px; color: var(--gray);">
                                            <i class="fa-solid fa-link"></i>
                                            <span style="font-family: monospace;">TX-0x9c5e43a2f7b6d1a8...</span>
                                        </div>
                                    </div>
                                    
                                    <div style="padding-bottom: 15px; margin-bottom: 15px; border-bottom: 1px solid var(--light-gray);">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <div style="color: var(--dark); font-weight: 500;">購買</div>
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.38 ETH</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px;">
                                            <div style="color: var(--gray);">
                                                <span>從 </span>
                                                <span style="color: var(--primary);">AuroraCreator</span>
                                                <span> 到 </span>
                                                <span style="color: var(--primary);">CryptoCollector</span>
                                            </div>
                                            <div style="color: var(--gray);">1 週前</div>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px; font-size: 12px; color: var(--gray);">
                                            <i class="fa-solid fa-link"></i>
                                            <span style="font-family: monospace;">TX-0x2a7f01d5c9b8e3a6...</span>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <div style="color: var(--dark); font-weight: 500;">鑄造</div>
                                            <div style="display: flex; align-items: center; gap: 5px; color: var(--primary-dark); font-weight: 500;">
                                                <i class="fa-brands fa-ethereum"></i>
                                                <span>0.10 ETH</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 10px;">
                                            <div style="color: var(--gray);">
                                                <span>由 </span>
                                                <span style="color: var(--primary);">AuroraCreator</span>
                                                <span> 創建</span>
                                            </div>
                                            <div style="color: var(--gray);">1 個月前</div>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px; font-size: 12px; color: var(--gray);">
                                            <i class="fa-solid fa-link"></i>
                                            <span style="font-family: monospace;">TX-0x3f5a73d8b9a8f21e...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 15px;">
                    <button id="backButton" class="btn btn-outline">
                        <i class="fa-solid fa-arrow-left" style="margin-right: 5px;"></i> 返回首頁
                    </button>
                    <button id="detailTransactionBtn" class="btn btn-primary">
                        <i class="fa-solid fa-arrow-right-arrow-left" style="margin-right: 5px;"></i> 交易此 NFT
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 提示訊息 -->
    <div id="successToast" class="toast toast-success">
        <div class="toast-icon"><i class="fa-solid fa-check"></i></div>
        <div class="toast-content">
            <div class="toast-title">操作成功</div>
            <div class="toast-message">操作已成功完成！</div>
        </div>
        <button class="toast-close"><i class="fa-solid fa-xmark"></i></button>
    </div>
    
    <div id="errorToast" class="toast toast-error">
        <div class="toast-icon"><i class="fa-solid fa-xmark"></i></div>
        <div class="toast-content">
            <div class="toast-title">操作失敗</div>
            <div class="toast-message">發生錯誤，請重試。</div>
        </div>
        <button class="toast-close"><i class="fa-solid fa-xmark"></i></button>
    </div>

    <footer>
        <div class="container">
            <div class="footer-bottom">
                &copy; 2025 NFT Exchange. 保留所有權利。
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 獲取URL參數
            const urlParams = new URLSearchParams(window.location.search);
            const nftId = urlParams.get('id') || '1';
            
            // 模擬獲取NFT數據（實際應用中應從API獲取）
            const nftData = {
                '1': {
                    title: '極光幻想 #001',
                    price: '0.45 ETH',
                    image: '/api/placeholder/350/350',
                    badge: '熱門',
                    owner: 'CryptoKing',
                    ownerAddress: '0x8F3...B92C',
                    description: '這是一張極為罕見的極光幻想系列 NFT 卡片，由知名數字藝術家 AuroraCreator 創作。卡片描繪了北極極光與星空的奇幻交融，作品運用了動態光感技術，在不同角度觀看時會呈現出變化的極光效果。這張卡片是極光系列中的第一張，具有極高的收藏價值和增值潛力。'
                },
                '2': {
                    title: '數字星塵 #042',
                    price: '0.82 ETH',
                    image: '/api/placeholder/350/350',
                    badge: '限量',
                    owner: 'MetaCollector',
                    ownerAddress: '0x2A7...F01D',
                    description: '數字星塵系列由著名數字藝術家 PixelMaster 創作，以宇宙星塵為靈感，結合分形藝術和程序化生成技術。每一張數字星塵都是獨一無二的，#042 號作品採用了稀有的藍紫色調，內含隱藏的星座圖案，是該系列中最受歡迎的作品之一。'
                },
                '3': {
                    title: '虛擬山水 #128',
                    price: '0.28 ETH',
                    image: '/api/placeholder/350/350',
                    badge: '新上架',
                    owner: 'BlockchainArtist',
                    ownerAddress: '0x9C5...E43A',
                    description: '虛擬山水系列結合了傳統東方山水畫的意境與現代數字藝術的表現形式，由數字藝術家 VirtualLandscape 創作。#128 號作品描繪了一幅煙霧繚繞的山川，融入了動態水墨效果，當觀看角度改變時，山水畫中的雲霧會產生流動的視覺效果。'
                }
            };
            
            // 填充NFT數據
            const currentNft = nftData[nftId] || nftData['1'];
            document.getElementById('nftTitle').textContent = currentNft.title;
            document.getElementById('nftPrice').textContent = currentNft.price;
            document.getElementById('nftImage').src = currentNft.image;
            document.getElementById('nftBadge').textContent = currentNft.badge;
            document.getElementById('nftOwner').textContent = currentNft.owner;
            document.getElementById('nftDescription').textContent = currentNft.description;
            
            if (currentNft.badge === '限量') {
                document.getElementById('nftBadge').style.background = 'linear-gradient(135deg, #e98aa6, #e9a2a2)';
            } else if (currentNft.badge === '新上架') {
                document.getElementById('nftBadge').style.background = 'linear-gradient(135deg, #8bd0c6, #a2c6e9)';
            }
            
            // 連接錢包按鈕
            const connectWalletBtn = document.getElementById('connectWalletBtn');
            const connectedWallet = document.getElementById('connectedWallet');
            const walletAddress = document.getElementById('walletAddress');
            
            // 交易與返回按鈕
            const transactionBtn = document.getElementById('transactionBtn');
            const detailTransactionBtn = document.getElementById('detailTransactionBtn');
            const backButton = document.getElementById('backButton');
            
            // Toast提示
            const successToast = document.getElementById('successToast');
            const errorToast = document.getElementById('errorToast');
            
            // 顯示提示訊息函數
            const showToast = (toast, title, message) => {
                toast.querySelector('.toast-title').textContent = title;
                toast.querySelector('.toast-message').textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            };
            
            // 連接錢包
            connectWalletBtn.addEventListener('click', async function() {
                if (typeof window.ethereum !== 'undefined') {
                    try {
                        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                        if (accounts.length > 0) {
                            const shortenedAddress = accounts[0].slice(0, 6) + '...' + accounts[0].slice(-4);
                            walletAddress.textContent = shortenedAddress;
                            connectWalletBtn.style.display = 'none';
                            connectedWallet.style.display = 'flex';
                            showToast(successToast, '錢包已連接', '您的錢包已成功連接到平台');
                        }
                    } catch (error) {
                        console.error('連接錢包時出錯:', error);
                        showToast(errorToast, '連接失敗', '無法連接到錢包，請確保您已安裝並登入 MetaMask');
                    }
                } else {
                    showToast(errorToast, '未安裝錢包', '請安裝 MetaMask 或其他以太坊錢包');
                }
            });
            
            // 交易按鈕點擊事件
            transactionBtn.addEventListener('click', function() {
                // 檢查錢包是否已連接
                if (connectedWallet.style.display === 'none') {
                    showToast(errorToast, '未連接錢包', '請先連接您的錢包以開始交易');
                    return;
                }
                
                // 跳轉到交易頁面
                window.location.href = `transaction.html?id=${nftId}`;
            });
            
            // 詳情頁交易按鈕
            detailTransactionBtn.addEventListener('click', function() {
                // 檢查錢包是否已連接
                if (connectedWallet.style.display === 'none') {
                    showToast(errorToast, '未連接錢包', '請先連接您的錢包以開始交易');
                    return;
                }
                
                // 跳轉到交易頁面
                window.location.href = `transaction.html?id=${nftId}`;
            });
            
            // 返回按鈕
            backButton.addEventListener('click', function() {
                window.location.href = 'index.html';
            });
            
            // 關閉提示訊息
            document.querySelectorAll('.toast-close').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.toast').classList.remove('show');
                });
            });
            
            // 頁面載入時檢查錢包是否已連接
            window.addEventListener('load', function() {
                if (typeof window.ethereum !== 'undefined') {
                    ethereum.request({ method: 'eth_accounts' })
                        .then(accounts => {
                            if (accounts.length > 0) {
                                // 已連接錢包
                                const shortenedAddress = accounts[0].slice(0, 6) + '...' + accounts[0].slice(-4);
                                walletAddress.textContent = shortenedAddress;
                                connectWalletBtn.style.display = 'none';
                                connectedWallet.style.display = 'flex';
                            }
                        })
                        .catch(err => console.error(err));
                }
            });
        });
    </script>
</body>
</html>